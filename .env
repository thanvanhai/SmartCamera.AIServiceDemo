# =============================================================================
# SmartCamera AI Service Configuration
# =============================================================================

# ----------------------------------------------------------------------------- 
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=SmartCamera.AIServiceDemo
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=INFO

# Service Ports
FASTAPI_PORT=8000
INGEST_PORT=8001
WORKER_PORT=8002
RESULTS_PORT=8003

# =============================================================================
# External Services
# =============================================================================

# SmartCamera WebAPI Integration
WEBAPI_BASE_URL=https://172.27.16.1:7217
WEBAPI_API_KEY=your-api-key-here
WEBAPI_TIMEOUT=30

# =============================================================================
# Message Brokers
# =============================================================================

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_AUTO_OFFSET_RESET=latest
KAFKA_GROUP_ID=smartcamera-ai
KAFKA_MAX_POLL_RECORDS=100

# Kafka Topics
KAFKA_TOPIC_RAW_FRAMES=smartcamera.raw_frames
KAFKA_TOPIC_AI_RESULTS=smartcamera.ai_results
KAFKA_TOPIC_ALERTS=smartcamera.alerts

# RabbitMQ Configuration
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/

# RabbitMQ Exchanges & Queues
RABBITMQ_EXCHANGE_CONTROL=smartcamera.control
RABBITMQ_QUEUE_CAMERA_COMMANDS=camera.commands
RABBITMQ_QUEUE_AI_STATUS=ai.status

# =============================================================================
# Storage & Database
# =============================================================================

# ClickHouse Configuration
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=9000
CLICKHOUSE_DATABASE=smartcamera
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=

# MinIO Configuration
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_SNAPSHOTS=smartcamera-snapshots
MINIO_BUCKET_MODELS=smartcamera-models
MINIO_SECURE=false

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# AI Worker Configuration (Nested with prefix AI_WORKER__)
# =============================================================================

# Model Settings
AI_WORKER__AI_MODELS_PATH=./models
AI_WORKER__AI_BATCH_SIZE=4
AI_WORKER__AI_CONFIDENCE_THRESHOLD=0.5
AI_WORKER__AI_NMS_THRESHOLD=0.4
AI_WORKER__AI_MAX_WORKERS=4

# GPU Settings
AI_WORKER__CUDA_VISIBLE_DEVICES=0
AI_WORKER__AI_DEVICE=cuda  # cuda, cpu, mps

# Detection Types
AI_WORKER__ENABLE_PERSON_DETECTION=true
AI_WORKER__ENABLE_FACE_RECOGNITION=true
AI_WORKER__ENABLE_VEHICLE_DETECTION=true
AI_WORKER__ENABLE_CUSTOM_DETECTION=false

# Performance Settings
AI_WORKER__MAX_FRAME_QUEUE_SIZE=1000
AI_WORKER__FRAME_SKIP_INTERVAL=1
AI_WORKER__DETECTION_COOLDOWN=5

# =============================================================================
# Monitoring & Performance
# =============================================================================

# Metrics
PROMETHEUS_PORT=9090
ENABLE_METRICS=true
METRICS_UPDATE_INTERVAL=10

# Health Checks
HEALTH_CHECK_INTERVAL=30
MAX_UNHEALTHY_CHECKS=3

# Logging
LOG_FORMAT=json  # json, console
LOG_FILE_PATH=./data/logs/smartcamera-ai.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
